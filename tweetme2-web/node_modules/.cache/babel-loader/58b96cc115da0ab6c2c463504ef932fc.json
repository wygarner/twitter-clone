{"ast":null,"code":"import _slicedToArray from \"/Users/wyattgarner/Dev/tweetme2/tweetme2-web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/wyattgarner/Dev/tweetme2/tweetme2-web/src/profiles/badge.js\";\nimport React, { useEffect, useState } from 'react';\nimport { UserDisplay, UserPicture } from './components';\nimport { apiProfileDetail, apiProfileFollowToggle } from './lookup';\nimport { DisplayCount } from './utils';\n\nfunction ProfileBadge(props) {\n  const user = props.user,\n        didFollowToggle = props.didFollowToggle,\n        profileLoading = props.profileLoading;\n  let currentVerb = user && user.is_following ? \"Unfollow\" : \"Follow\";\n  currentVerb = profileLoading ? \"Loading...\" : currentVerb;\n\n  const handleFollowToggle = event => {\n    event.preventDefault();\n\n    if (didFollowToggle && !profileLoading) {\n      didFollowToggle(currentVerb);\n    }\n  };\n\n  return user ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, React.createElement(UserPicture, {\n    user: user,\n    hideLink: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, React.createElement(UserDisplay, {\n    user: user,\n    includeFullName: true,\n    hideLink: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  })), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, React.createElement(DisplayCount, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, user.follower_count), \" \", user.follower_count === 1 ? \"follower\" : \"followers\", \" \"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(DisplayCount, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, user.following_count), \" following\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, user.location), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, user.bio), React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: handleFollowToggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, currentVerb)) : null;\n}\n\nexport function ProfileBadgeComponent(props) {\n  const username = props.username; // lookup\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        didLookup = _useState2[0],\n        setDidLookup = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        profile = _useState4[0],\n        setProfile = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        profileLoading = _useState6[0],\n        setProfileLoading = _useState6[1];\n\n  const handleBackendLookup = (response, status) => {\n    if (status === 200) {\n      setProfile(response);\n    }\n  };\n\n  useEffect(() => {\n    if (didLookup === false) {\n      apiProfileDetail(username, handleBackendLookup);\n      setDidLookup(true);\n    }\n  }, [username, didLookup, setDidLookup]);\n\n  const handleNewFollow = actionVerb => {\n    apiProfileFollowToggle(username, actionVerb, (response, status) => {\n      // console.log(response, status)\n      if (status === 200) {\n        setProfile(response); // apiProfileDetail(username, handleBackendLookup)\n      }\n\n      setProfileLoading(false);\n    });\n    setProfileLoading(true);\n  };\n\n  return didLookup === false ? \"Loading...\" : profile ? React.createElement(ProfileBadge, {\n    user: profile,\n    didFollowToggle: handleNewFollow,\n    profileLoading: profileLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }) : null;\n}","map":{"version":3,"sources":["/Users/wyattgarner/Dev/tweetme2/tweetme2-web/src/profiles/badge.js"],"names":["React","useEffect","useState","UserDisplay","UserPicture","apiProfileDetail","apiProfileFollowToggle","DisplayCount","ProfileBadge","props","user","didFollowToggle","profileLoading","currentVerb","is_following","handleFollowToggle","event","preventDefault","follower_count","following_count","location","bio","ProfileBadgeComponent","username","didLookup","setDidLookup","profile","setProfile","setProfileLoading","handleBackendLookup","response","status","handleNewFollow","actionVerb"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\n\nimport {UserDisplay, UserPicture} from './components'\nimport {apiProfileDetail, apiProfileFollowToggle} from './lookup'\n\nimport {DisplayCount} from './utils'\n\nfunction ProfileBadge(props) {\n    const {user, didFollowToggle, profileLoading} = props\n    let currentVerb = (user && user.is_following) ? \"Unfollow\" : \"Follow\"\n    currentVerb = profileLoading ? \"Loading...\" : currentVerb\n    const handleFollowToggle = (event) => {\n        event.preventDefault()\n        if (didFollowToggle && !profileLoading) {\n            didFollowToggle(currentVerb)\n        }\n    }\n    return user ? <div>\n        <UserPicture user={user} hideLink />\n        <p><UserDisplay user={user} includeFullName hideLink /></p>\n        <p><DisplayCount>{user.follower_count}</DisplayCount> {user.follower_count === 1 ? \"follower\" : \"followers\"} </p>\n        <p><DisplayCount>{user.following_count}</DisplayCount> following</p>\n        <p>{user.location}</p>\n        <p>{user.bio}</p>\n        <button className='btn btn-primary' onClick={handleFollowToggle}>{currentVerb}</button>\n    </div> : null\n}\n\nexport function ProfileBadgeComponent (props) {\n    const {username} = props\n    // lookup\n    const [didLookup, setDidLookup] = useState(false)\n    const [profile, setProfile] = useState(null)\n    const [profileLoading, setProfileLoading] = useState(false)\n    const handleBackendLookup = (response, status) => {\n      if (status === 200) {\n        setProfile(response)\n      }\n    }\n    useEffect(()=>{\n      if (didLookup === false){\n        apiProfileDetail(username, handleBackendLookup)\n        setDidLookup(true)\n      }\n    }, [username, didLookup, setDidLookup])\n\n    const handleNewFollow = (actionVerb) => {\n        apiProfileFollowToggle(username, actionVerb, (response, status)=>{\n            // console.log(response, status)\n            if (status===200) {\n                setProfile(response)\n                // apiProfileDetail(username, handleBackendLookup)\n            }\n            setProfileLoading(false)\n        })\n        setProfileLoading(true)\n        \n    }\n    return didLookup === false ? \"Loading...\" : profile ? <ProfileBadge user={profile} didFollowToggle={handleNewFollow} profileLoading={profileLoading} /> : null\n}"]},"metadata":{},"sourceType":"module"}